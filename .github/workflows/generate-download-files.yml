name: Bot - Generate download files
on:
  pull_request:
    types: [opened, synchronize]
  schedule:
    - cron: "0 * * * *"

permissions: write-all

env: 
  GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

jobs:
  generate_downloadable_files:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout
      uses: actions/checkout@v3
    - uses: actions/setup-node@v3
    - name: Call Script
      run: |
        echo "[START]"
        ls -la ./_data/downloadFiles
        yarn install
        yarn scripts:create:shareable_guides
        echo "[END]"
        git add .
        git commit -m "docs: update downloadable files" || echo "Up to date with main"
        git push origin HEAD
        echo "[END]"
