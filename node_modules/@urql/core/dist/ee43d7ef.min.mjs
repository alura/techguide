import{GraphQLError as r}from"graphql/error/GraphQLError.mjs";import{Kind as e}from"graphql/language/kinds.mjs";import{parse as t}from"graphql/language/parser.mjs";import{print as n}from"graphql/language/printer.mjs";import{make as o}from"wonka";function a(e){return"string"==typeof e?new r(e):"object"==typeof e&&e.message?new r(e.message,e.nodes,e.source,e.positions,e.path,e,e.extensions||{}):e}var i=function(r){function e(e){var t,n,o,i=e.networkError,s=e.response,u=(e.graphQLErrors||[]).map(a),c=(n=u,o="",void 0!==(t=i)?o="[Network] "+t.message:(void 0!==n&&n.forEach((function(r){o+="[GraphQL] "+r.message+"\n"})),o.trim()));r.call(this,c),this.name="CombinedError",this.message=c,this.graphQLErrors=u,this.networkError=i,this.response=s}return r&&(e.__proto__=r),(e.prototype=Object.create(r&&r.prototype)).constructor=e,e.prototype.toString=function(){return this.message},e}(Error);function s(r,e){r|=0;for(var t=0,n=0|e.length;t<n;t++)r=(r<<5)+r+e.charCodeAt(t);return r}function u(r){return s(5381,r)>>>0}var c=new Set,f=new WeakMap;function p(r){if(null===r||c.has(r))return"null";if("object"!=typeof r)return JSON.stringify(r)||"";if(r.toJSON)return p(r.toJSON());if(Array.isArray(r)){for(var e="[",t=0,n=r.length;t<n;t++){t>0&&(e+=",");var o=p(r[t]);e+=o.length>0?o:"null"}return e+"]"}var a=Object.keys(r).sort();if(!a.length&&r.constructor&&r.constructor!==Object){var i=f.get(r)||Math.random().toString(36).slice(2);return f.set(r,i),'{"__key":"'+i+'"}'}c.add(r);for(var s="{",u=0,l=a.length;u<l;u++){var d=a[u],h=p(r[d]);h&&(s.length>1&&(s+=","),s+=p(d)+":"+h)}return c.delete(r),s+"}"}function l(r){return c.clear(),p(r)}var d=/("{3}[\s\S]*"{3}|"(?:\\.|[^"])*")/g,h=/([\s,]|#[^\n\r]+)+/g;function v(r,e){return e%2==0?r.replace(h," ").trim():r}function g(r){var e=("string"!=typeof r?r.loc&&r.loc.source.body||n(r):r).split(d).map(v).join("");if("string"!=typeof r){var t="definitions"in r&&b(r);t&&(e="# "+t+"\n"+e),r.loc||(r.loc={start:0,end:e.length,source:{body:e,name:"gql",locationOffset:{line:1,column:1}}})}return e}var y=new Map;function m(r){var e,n;return"string"==typeof r?(e=u(g(r)),n=y.get(e)||t(r,{noLocation:!0})):(e=r.__key||u(g(r)),n=y.get(e)||r),n.loc||g(n),n.__key=e,y.set(e,n),n}function x(r,e){e||(e={});var t=m(r);return{key:s(t.__key,l(e))>>>0,query:t,variables:e}}function b(r){for(var t=0,n=r.definitions.length;t<n;t++){var o=r.definitions[t];if(o.kind===e.OPERATION_DEFINITION&&o.name)return o.name.value}}function O(r){for(var t=0,n=r.definitions.length;t<n;t++){var o=r.definitions[t];if(o.kind===e.OPERATION_DEFINITION)return o.operation}}function w(){return w=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},w.apply(this,arguments)}function N(r,e,t){if(!("data"in e)&&!("errors"in e)||"path"in e)throw new Error("No Content");return{operation:r,data:e.data,error:Array.isArray(e.errors)?new i({graphQLErrors:e.errors,response:t}):void 0,extensions:"object"==typeof e.extensions&&e.extensions||void 0,hasNext:!!e.hasNext}}function E(r,e,t){var n=w({},r);if(n.hasNext=!!e.hasNext,!("path"in e))return"data"in e&&(n.data=e.data),n;Array.isArray(e.errors)&&(n.error=new i({graphQLErrors:n.error?n.error.graphQLErrors.concat(e.errors):e.errors,response:t}));for(var o,a=n.data=w({},n.data),s=0;s<e.path.length;)a=a[o=e.path[s++]]=Array.isArray(a[o])?[].concat(a[o]):w({},a[o]);return w(a,e.data),n}function j(r,e,t){return{operation:r,data:void 0,error:new i({networkError:e,response:t}),extensions:void 0}}function k(r){return"query"===r.kind&&!!r.context.preferGetMethod}function q(r){return{query:n(r.query),operationName:b(r.query),variables:r.variables||void 0,extensions:void 0}}function S(r,e){var t=k(r),n=r.context.url;if(!t||!e)return n;var o=[];e.operationName&&o.push("operationName="+encodeURIComponent(e.operationName)),e.query&&o.push("query="+encodeURIComponent(e.query.replace(/#[^\n\r]+/g," ").trim())),e.variables&&o.push("variables="+encodeURIComponent(l(e.variables))),e.extensions&&o.push("extensions="+encodeURIComponent(l(e.extensions)));var a=n+"?"+o.join("&");return a.length>2047?(r.context.preferGetMethod=!1,n):a}function _(r,e){var t=k(r),n={accept:"application/graphql+json, application/json"};t||(n["content-type"]="application/json");var o=("function"==typeof r.context.fetchOptions?r.context.fetchOptions():r.context.fetchOptions)||{};if(o.headers)for(var a in o.headers)n[a.toLowerCase()]=o.headers[a];return w({},o,{body:!t&&e?JSON.stringify(e):void 0,method:t?"GET":"POST",headers:n})}var I="undefined"!=typeof Symbol?Symbol.asyncIterator:null,A="undefined"!=typeof TextDecoder?new TextDecoder:null,C=/content-type:[^\r\n]*application\/json/i,T=/boundary="?([^=";]+)"?/i;function L(r,e,t){var n="manual"===t.redirect?400:300,a=r.context.fetch;return o((function(o){var i=o.next,s=o.complete,u="undefined"!=typeof AbortController?new AbortController:null;u&&(t.signal=u.signal);var c,f=!1,p=!1,l=!1;return Promise.resolve().then((function(){if(!p)return(a||fetch)(e,t)})).then((function(e){if(e)return l=(c=e).status<200||c.status>=n,function(r,e,t){var n=t.headers&&t.headers.get("Content-Type")||"";if(/text\//i.test(n))return t.text().then((function(n){r(j(e,new Error(n),t))}));if(!/multipart\/mixed/i.test(n))return t.text().then((function(n){r(N(e,JSON.parse(n),t))}));var o,a="---",i=n.match(T);i&&(a="--"+i[1]);var s=function(){};if(I&&t[I]){var u=t[I]();o=u.next.bind(u)}else{if(!("body"in t)||!t.body)throw new TypeError("Streaming requests unsupported");var c=t.body.getReader();s=c.cancel.bind(c),o=c.read.bind(c)}var p="",l=!0,d=null,h=null;return o().then((function n(i){if(i.done)f=!0;else{var s="Buffer"===(b=i.value).constructor.name?b.toString():A.decode(b),u=s.indexOf(a);for(u>-1?u+=p.length:u=p.indexOf(a),p+=s;u>-1;){var c=p.slice(0,u),v=p.slice(u+a.length);if(l)l=!1;else{var g=c.indexOf("\r\n\r\n")+4,y=c.slice(0,g),m=c.slice(g,c.lastIndexOf("\r\n")),x=void 0;if(C.test(y))try{x=JSON.parse(m),d=h=h?E(h,x,t):N(e,x,t)}catch(r){}if("--"===v.slice(0,2)||x&&!x.hasNext){if(!h)return r(N(e,{},t));break}}u=(p=v).indexOf(a)}}var b;if(d&&(r(d),d=null),!i.done&&(!h||h.hasNext))return o().then(n)})).finally(s)}(i,r,c)})).then(s).catch((function(e){if(f)throw e;var t=j(r,l&&c.statusText?new Error(c.statusText):e,c);i(t),s()})),function(){p=!0,u&&u.abort()}}))}export{i as C,w as _,j as a,q as b,S as c,_ as d,L as e,x as f,O as g,l as h,E as i,b as j,m as k,N as m,g as s};
//# sourceMappingURL=ee43d7ef.min.mjs.map
